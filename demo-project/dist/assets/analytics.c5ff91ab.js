import{k as d,o as v,c as h,m as e,b9 as H,H as M,bd as A,z as w,bY as W,af as Y,B as D,Z,q as n,b as U,w as o,p as a,E as V,D as k,y as N,F as G,a as J,x as I,cN as X,I as j,cT as S,A as ee}from"./index.7cf7c61e.js";import{u as L}from"./useProjectStore.52ff6a12.js";import{a as te,b as le,c as ae,V as se}from"./VCard.2337b864.js";import{V as oe}from"./VInput.1239432e.js";import{V as z}from"./VTextField.0f1ebf9b.js";import{V as B}from"./VDivider.be3199b8.js";import{V as ne}from"./VTable.3f6109ad.js";import{V as $}from"./VBtn.173f27d7.js";import{V as ie}from"./VAvatar.4f19170c.js";import{V as re}from"./VImg.d72fefbf.js";import{V as ue}from"./VMenu.c36c3c49.js";import{V as de}from"./VPagination.bb4ea96e.js";import{a as ce,V as me}from"./VRow.ff0250fc.js";import"./router.3438bc48.js";import"./position.bc69640e.js";import"./index.c48d7475.js";/* empty css                   */import"./VField.f8e0ae60.js";import"./easing.36b781ab.js";import"./forwardRefs.c003b6b8.js";import"./VCounter.77ed01eb.js";import"./scopeId.a061e5d3.js";import"./VOverlay.2eee6981.js";import"./lazy.91ce62a6.js";const _e={key:0,class:"custom-modal-background"},pe={class:"custom-modal-content"},ve=e("p",{class:"heading"},"Add New Student",-1),fe={class:"form"},he=["onSubmit"],be={class:"mb-4"},ge=e("label",{class:"custom-modal-label"},"Title:",-1),ye={key:0,class:"p"},xe={class:"mb-4"},Ve=e("label",{class:"custom-modal-label"},"Thumbnail:",-1),we={key:0,class:"p"},Te={class:"mb-4"},De=e("label",{class:"custom-modal-label"},"Album-ID:",-1),Ie=e("button",{type:"submit",class:"custom-modal-submit"}," Submit ",-1),$e={__name:"modalFormData",props:{isModalOpen:{type:Boolean,required:!0}},setup(C){const i=W(),r=d(null),m=d(null),c=d(null),_=d(!1),u=d(!1);L();const b=()=>{const f=event.target.files[0];if(f){if(f.size>100*1024){u.value=!0;return}u.value=!1;const p=new FileReader;p.onload=()=>{m.value=p.result},p.readAsDataURL(f)}},T=()=>{if(r.value.length<10){_.value=!0;return}const f={title:r.value,thumbnailUrl:m.value,albumId:c.value};i.emit("rowAdded",f),g()},g=()=>{i.emit("close"),r.value=null,m.value=null,c.value=null,_.value=!1};return(f,p)=>C.isModalOpen?(v(),h("div",_e,[e("div",pe,[ve,e("div",fe,[e("form",{onSubmit:H(T,["prevent"])},[e("div",be,[ge,e("div",null,[M(e("input",{type:"text",placeholder:"Enter Title","onUpdate:modelValue":p[0]||(p[0]=y=>r.value=y),class:"custom-modal-input",required:""},null,512),[[A,r.value]])]),_.value?(v(),h("p",ye,"Title must be at least 10 characters long.")):w("",!0)]),e("div",xe,[Ve,e("div",null,[e("input",{type:"file",accept:"image/*",onChange:b,class:"custom-modal-input",required:""},null,32)]),u.value?(v(),h("p",we,"Image size is too large. Maximum size allowed is 100 KB.")):w("",!0)]),e("div",Te,[De,e("div",null,[M(e("input",{type:"number",placeholder:"Enter Album ID","onUpdate:modelValue":p[1]||(p[1]=y=>c.value=y),required:"",class:"custom-modal-input",min:1,max:20},null,512),[[A,c.value]])])]),e("div",{class:"custom-modal-buttons"},[e("button",{type:"button",onClick:g,class:"custom-modal-cancel"}," Cancel "),Ie])],40,he)])])])):w("",!0)}};const Ce={class:"d-flex align-center gap-2",style:{width:"272px"}},Ee=e("tr",null,[e("th",{scope:"col",class:"font-weight-semibold w-0"}),e("th",{scope:"col",class:"font-weight-semibold text-center"},"ALBUM ID"),e("th",{scope:"col",class:"font-weight-semibold text-center"},"TITLE"),e("th",{scope:"col",class:"font-weight-semibold"},[e("span",{class:"ms-2"},"ACTIONS")])],-1),ke={class:"d-flex align-center"},Se={class:"text-medium-emphasis text-center"},Me={key:0},Ae={key:0,class:"p"},Ne={key:1,class:"text-left"},ze={class:"text-center",style:{width:"7.5rem"}},Be=e("tr",null,[e("td",{colspan:"8",class:"text-center text-body-1"},"No data available")],-1),Ue=[Be],Le={class:"text-sm text-disabled"},Pe={__name:"AnalyticsProjectTable",setup(C){const i=L(),r=d(""),m=5,c=d(1),_=d(!1),u=d("");d("");const b=d({});Y(()=>{i.fetchData()});const T=D(()=>Math.ceil(g.value.length/m)),g=D(()=>{if(r.value){const l=r.value.toLowerCase();return i.studentData.filter(t=>t.title.toLowerCase().includes(l))}else return i.studentData});Z(r,()=>{c.value=1});const f=D(()=>{const l=(c.value-1)*m,t=l+m;return g.value.slice(l,t)}),p=D(()=>{const l=g.value.length;if(l===0)return"No entries available";const t=(c.value-1)*m+1,s=Math.min(t+m-1,l);return`Showing ${t} to ${s} of ${l} entries`}),y=l=>{l.isEditing=!0,u.value=l.title},P=l=>{u.value.length>=10&&(b.value[l]="")},R=async l=>{_.value=!0;try{if(u.value.length<10){b.value[l._id]="Title must be at least 10 characters long";return}await S.put(`/students/${l._id}`,{title:u.value});const t=i.studentData.find(s=>s._id===l._id);t&&(t.title=u.value,l.isEditing=!1)}catch(t){console.error("Error updating title:",t)}_.value=!1},q=async l=>{_.value=!0;try{await S.delete(`/students/${l._id}`),i.studentData=i.studentData.filter(t=>t._id!==l._id)}catch(t){console.error("Error deleting row:",t)}_.value=!1},E=d(!1),F=()=>{E.value=!0},K=()=>{E.value=!1},O=async l=>{try{const t=await S.post("/students",l);i.studentData.push(t.data)}catch(t){console.error("Error adding row:",t)}};return(l,t)=>n(i).studentData?(v(),U(se,{key:0},{default:o(()=>[a(te,{class:"project-header d-flex flex-wrap justify-space-between py-4 gap-4"},{append:o(()=>[e("div",Ce,[a(oe,null,{default:o(()=>[V("Search:")]),_:1}),a(z,{modelValue:n(r),"onUpdate:modelValue":t[0]||(t[0]=s=>k(r)?r.value=s:null),placeholder:"Search"},null,8,["modelValue"])])]),default:o(()=>[a(le,null,{default:o(()=>[V("Students Data")]),_:1})]),_:1}),a(B),a(ne,{class:"text-no-wrap"},{default:o(()=>[e("thead",null,[e("tr",null,[a($,{color:"primary",class:"mtq-2 mx-2 mt-2",elevated:"",onClick:F},{default:o(()=>[V(" NEW "),a(N,{size:"18",icon:"tabler-user-plus",color:"default",class:"mx-2 text-bold"})]),_:1}),a($e,{"is-modal-open":n(E),onClose:K,onRowAdded:O},null,8,["is-modal-open"])]),Ee]),e("tbody",null,[(v(!0),h(G,null,J(n(f),(s,Q)=>(v(),h("tr",{key:Q,style:{height:"3.5rem"}},[e("td",null,[e("div",ke,[a(ie,{variant:"tonal",color:"primary",size:"38"},{default:o(()=>[a(re,{src:s.thumbnailUrl},null,8,["src"])]),_:2},1024)])]),e("td",Se,I(s.albumId),1),e("td",null,[s.isEditing?(v(),h("div",Me,[a(z,{modelValue:n(u),"onUpdate:modelValue":t[1]||(t[1]=x=>k(u)?u.value=x:null),onInput:x=>P(s._id),onKeyup:X(x=>R(s),["enter"])},null,8,["modelValue","onInput","onKeyup"]),n(b)[s._id]?(v(),h("p",Ae,I(n(b)[s._id]),1)):w("",!0)])):(v(),h("div",Ne,I(s.title),1))]),e("td",ze,[a($,{icon:"",variant:"plain",color:"default",size:"x-small"},{default:o(()=>[a(N,{size:22,icon:"tabler-dots-vertical"}),a(ue,{activator:"parent"},{default:o(()=>[e("div",null,[a($,{loading:n(_),class:"ma-1",color:"error",onClick:x=>q(s)},{default:o(()=>[V(" DELETE ")]),_:2},1032,["loading","onClick"])]),a($,{loading:n(_),class:"ma-1",color:"none",onClick:x=>y(s)},{default:o(()=>[V(" EDIT ")]),_:2},1032,["loading","onClick"])]),_:2},1024)]),_:2},1024)])]))),128))]),M(e("tfoot",null,Ue,512),[[j,!n(i).studentData.length]])]),_:1}),a(B),a(ae,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3"},{default:o(()=>[e("span",Le,I(n(p)),1),a(de,{modelValue:n(c),"onUpdate:modelValue":t[2]||(t[2]=s=>k(c)?c.value=s:null),size:"small","total-visible":1,length:n(T),total:n(T)},null,8,["modelValue","length","total"])]),_:1})]),_:1})):w("",!0)}};const dt={__name:"analytics",setup(C){return ee().current.value.colors,(r,m)=>(v(),U(me,{class:"match-height"},{default:o(()=>[a(ce,{cols:"12",lg:"12"},{default:o(()=>[a(Pe)]),_:1})]),_:1}))}};export{dt as default};
